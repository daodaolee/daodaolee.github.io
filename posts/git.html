<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git从入门到规范</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.b4de4daf.css">
    <link rel="modulepreload" href="/assets/chunks/Home.84031245.js">
    <link rel="modulepreload" href="/assets/chunks/Navbar.7a2e2f08.js">
    <link rel="modulepreload" href="/assets/chunks/Page.298bf9fa.js">
    <link rel="modulepreload" href="/assets/chunks/Post.8123d9ef.js">
    <link rel="modulepreload" href="/assets/chunks/Movie.e7531bdd.js">
    <link rel="modulepreload" href="/assets/app.ec7a89e7.js">
    <link rel="modulepreload" href="/assets/posts_git.md.c90465ed.lean.js">
    
    <link rel="icon" href="/favicon.ico">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><div><header class="w-100vw p-6 flex items-center justify-between fixed" data-v-29c3ee47><a href="/" data-v-29c3ee47><img src="/logo-black.webp" class="w-10 h-10" data-v-29c3ee47></a><div class="nav-icons flex items-center gap-5" data-v-29c3ee47><!--[--><a target="_self" href="/posts/" class="cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="md:hidden" data-v-29c3ee47><div class="i-ri-article-line icon" data-v-29c3ee47></div></div><span text-sm ml-1 class="lt-md:hidden" data-v-29c3ee47>Posts</span></a><a target="_self" href="/movies/" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><!----><span text-sm ml-1 class="lt-md:hidden" data-v-29c3ee47>Movies</span></a><a target="_blank" href="https://github.com/daodaolee" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="" data-v-29c3ee47><div class="i-ri:github-line icon" data-v-29c3ee47></div></div><!----></a><a target="_blank" href="https://twitter.com/daodaolee_" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="" data-v-29c3ee47><div class="i-ri:twitter-line icon" data-v-29c3ee47></div></div><!----></a><a target="_blank" href="https://www.instagram.com/daodaoleee/" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="" data-v-29c3ee47><div class="i-ri-instagram-line icon" data-v-29c3ee47></div></div><!----></a><a target="_blank" href="https://dribbble.com/daodaolee" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="" data-v-29c3ee47><div class="i-ri-dribbble-line icon" data-v-29c3ee47></div></div><!----></a><a target="_blank" href="https://space.bilibili.com/294106298?spm_id_from=333.1007.0.0" class="lt-md:hidden cursor-pointer op-60 transition-colors-300" data-v-29c3ee47><div text-xl class="" data-v-29c3ee47><div class="i-ri-bilibili-fill icon" data-v-29c3ee47></div></div><!----></a><!--]--><a class="cursor-pointer op-60" data-v-29c3ee47><div class="i-ri:sun-line icon" data-v-29c3ee47></div></a></div></header><main class="content max-w-73ch mx-auto px-6 md:px-0 pb-15"><div class="pt-25"><div class="mb-8"><h1 class="title mt-0 text-2.2rem mb-5">Git从入门到规范</h1><div class="op-60 flex items-end"><span>Oct 24, 2021</span><div class="text-0.85rem pl-1.8rem"><!--[--><span> #git  </span><!--]--></div></div></div><div style="position:relative;" class="page"><div><nav class="table-of-contents"><ul><li><a href="#背景">背景</a></li><li><a href="#git和svn的区别">Git和SVN的区别</a><ul><li><a href="#git是分布式的-svn是集中式的">Git是分布式的，SVN是集中式的</a></li><li><a href="#git复杂概念多-svn简单易上手">Git复杂概念多，SVN简单易上手</a></li><li><a href="#git分支廉价-svn分支昂贵">Git分支廉价，SVN分支昂贵</a></li></ul></li><li><a href="#git工作区域和流程">Git工作区域和流程</a><ul><li><a href="#工作区域">工作区域</a></li><li><a href="#流程">流程</a></li></ul></li><li><a href="#git基本操作">Git基本操作</a><ul><li><a href="#config">config</a></li><li><a href="#status">status</a></li><li><a href="#add">add</a></li><li><a href="#commit">commit</a></li><li><a href="#pull">pull</a></li><li><a href="#fetch">fetch</a></li><li><a href="#branch">branch</a></li><li><a href="#tag">tag</a></li></ul></li><li><a href="#git常见命令">Git常见命令</a><ul><li><a href="#git-rebase">git rebase</a></li><li><a href="#git-merge">git merge</a></li><li><a href="#git-cherry-pick">git cherry-pick</a></li><li><a href="#git-stash">git stash</a></li><li><a href="#git-reset">git reset</a></li><li><a href="#git-revert">git revert</a></li><li><a href="#git-alias">git alias</a></li></ul></li><li><a href="#git-深入">Git 深入</a><ul><li><a href="#版本控制分类">版本控制分类</a></li><li><a href="#文件操作">文件操作</a></li><li><a href="#目录">目录</a></li><li><a href="#项目规范">项目规范</a></li></ul></li></ul></nav><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-hidden="true">#</a></h2><p>Linus Torvalds，linux作者</p><p>linux在创造初期，世界各地的志愿者把源文件通过 <code>diff</code> 的方式发给 Linus，然后Linus手动合并代码！</p><p>人工管理代码容易导致2个问题：<strong>容易出错</strong> 和 <strong>效率低下</strong>，于是Linus 选择了一个叫 <code>BitKeeper</code> 的版本控制系统，而 BitKeeper 的东家 BitMover 公司出于人道主义精神，授权 Linux 社区免费使用这个版本控制系统。最后，出于某种原因，BitMover 公司收回了 Linux 社区的免费使用权，于是 Linus 花了两周时间自己用 C 语言写了一个分布式版本控制系统，从此GIt诞生了。</p><p><em>市面上还存在的其他版本控制产品有：CVS，VSS， TFS，Visual Studio Online，Perforce、Rational ClearCase、RCS（GNU Revision Control System）、Serena Dimention、SVK、BitKeeper、Monotone、Bazaar、Mercurial、SourceGear Vault...</em></p><h2 id="git和svn的区别" tabindex="-1">Git和SVN的区别 <a class="header-anchor" href="#git和svn的区别" aria-hidden="true">#</a></h2><h3 id="git是分布式的-svn是集中式的" tabindex="-1">Git是分布式的，SVN是集中式的 <a class="header-anchor" href="#git是分布式的-svn是集中式的" aria-hidden="true">#</a></h3><p>因为 Git 是分布式的，所以 Git 支持离线工作，在本地可以进行很多操作，而 SVN 必须联网才能正常工作。</p><h3 id="git复杂概念多-svn简单易上手" tabindex="-1">Git复杂概念多，SVN简单易上手 <a class="header-anchor" href="#git复杂概念多-svn简单易上手" aria-hidden="true">#</a></h3><p>Git 的命令实在太多了，日常工作需要掌握 <code>add</code>，<code>commit</code>，<code>status</code>，<code>fetch</code>，<code>push</code>，<code>rebase</code> 等，若要熟练掌握，还必须掌握 <code>rebase</code> 和 <code>merge</code> 的区别，<code>fetch</code> 和 <code>pull</code> 的区别等，除此之外，还有 <code>cherry-pick</code>，<code>stash</code> 等功能。</p><p>SVN在易用性这方面 会好得多，简单易上手，对新手很友好，比如：<code>add</code>，<code>commit</code>，<code>status</code>，<code>delete</code>，<code>checkout</code>，<code>update</code> 等.</p><h3 id="git分支廉价-svn分支昂贵" tabindex="-1">Git分支廉价，SVN分支昂贵 <a class="header-anchor" href="#git分支廉价-svn分支昂贵" aria-hidden="true">#</a></h3><p>Git 分支是指针指向 <strong>某次提交</strong>，而 SVN 分支是 <strong>拷贝的目录</strong>。这个特性使 Git 的分支切换非常迅速，且创建成本非常低。</p><p>而且 Git 有本地分支，SVN 无本地分支。在实际开发过程中，经常会遇到有些代码没写完，但是需紧急处理其他问题，若我们使用 Git，便可以创建本地分支存储没写完的代码，待问题处理完后，再回到本地分支继续完成代码。</p><h2 id="git工作区域和流程" tabindex="-1">Git工作区域和流程 <a class="header-anchor" href="#git工作区域和流程" aria-hidden="true">#</a></h2><h3 id="工作区域" tabindex="-1">工作区域 <a class="header-anchor" href="#工作区域" aria-hidden="true">#</a></h3><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d446ae44badc41d3a4c3dfad1efb4b6e~tplv-k3u1fbpfcp-zoom-1.image" alt="流程"><ul><li><p>Workspace：工作区，就是平时进行开发改动的地方，是当前看到最新的内容，在开发的过程也就是对工作区的操作（也就是本地工作区）。</p></li><li><p>Index：暂存区，当执行 <code>git add</code> 的命令后，工作区的文件就会被移入暂存区，暂存区标记了当前工作区中哪些内容是被 Git 管理的，当完成某个需求或者功能后需要提交代码，第一步就是通过 <code>git add</code> 先提交到暂存区。</p></li><li><p>Repository：本地仓库，位于自己的电脑上，通过 <code>git commit</code> 提交暂存区的内容，会进入本地仓库。</p></li><li><p>Remote：远程仓库，用来托管代码的服务器，远程仓库的内容能够被分布在多个地点的处于协作关系的本地仓库修改，本地仓库修改完代码后通过 <code>git push</code> 命令同步代码到远程仓库。</p></li></ul><h3 id="流程" tabindex="-1">流程 <a class="header-anchor" href="#流程" aria-hidden="true">#</a></h3><p>一般来说，工作流程也就是：</p><ol><li>本地工作区开发，添加/修改文件</li><li>将修改后的文件放入暂存区</li><li>暂存区提交到本地仓库</li><li>本地仓库推送到远程仓库</li></ol><h2 id="git基本操作" tabindex="-1">Git基本操作 <a class="header-anchor" href="#git基本操作" aria-hidden="true">#</a></h2><blockquote><p>git有三个环境配置级别： <code>system(系统级别)</code>，<code>global(当前用户)</code>，<code>local(项目)</code> 优先级：<code>local</code> &gt; <code>global</code> &gt; <code>system</code></p></blockquote><h3 id="config" tabindex="-1">config <a class="header-anchor" href="#config" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 设置全局，会同步到 `~/.gitconfig` 文件里</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git config --global user.name </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">username</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;">#名称</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git config --global user.email username@xx.com  </span><span style="color:#758575DD;">#邮箱</span></span>
<span class="line"><span style="color:#758575DD;"># 删除全局</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git config --global --unset user.name</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 设置全局，会同步到 `~/.gitconfig` 文件里</span></span>
<span class="line"><span style="color:#393A34;">git config --global user.name </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">username</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;">#名称</span></span>
<span class="line"><span style="color:#393A34;">git config --global user.email username@xx.com  </span><span style="color:#A0ADA0;">#邮箱</span></span>
<span class="line"><span style="color:#A0ADA0;"># 删除全局</span></span>
<span class="line"><span style="color:#393A34;">git config --global --unset user.name</span></span>
<span class="line"></span></code></pre></div><h3 id="status" tabindex="-1">status <a class="header-anchor" href="#status" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 查看指定文件当前状态</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git status </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 查看所有文件状态</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git status</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 查看指定文件当前状态</span></span>
<span class="line"><span style="color:#393A34;">git status </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看所有文件状态</span></span>
<span class="line"><span style="color:#393A34;">git status</span></span>
<span class="line"></span></code></pre></div><h3 id="add" tabindex="-1">add <a class="header-anchor" href="#add" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 添加某个文件到暂存区，后面可以跟多个文件，以空格区分</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git add xxx</span></span>
<span class="line"><span style="color:#758575DD;"># 添加当前更改的所有文件到暂存区。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git add </span><span style="color:#B8A965;">.</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 添加某个文件到暂存区，后面可以跟多个文件，以空格区分</span></span>
<span class="line"><span style="color:#393A34;">git add xxx</span></span>
<span class="line"><span style="color:#A0ADA0;"># 添加当前更改的所有文件到暂存区。</span></span>
<span class="line"><span style="color:#393A34;">git add </span><span style="color:#998418;">.</span></span>
<span class="line"></span></code></pre></div><h3 id="commit" tabindex="-1">commit <a class="header-anchor" href="#commit" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 提交暂存的更改，会新开编辑器进行编辑</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git commit </span></span>
<span class="line"><span style="color:#758575DD;"># 提交暂存的更改，并记录下备注</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git commit -m </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">you message</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#758575DD;"># 等同于 git add . &amp;&amp; git commit -m</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git commit -am</span></span>
<span class="line"><span style="color:#758575DD;"># 对最近一次的提交的信息进行修改，此操作会修改 commit 的 hash 值</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git commit --amend</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 提交暂存的更改，会新开编辑器进行编辑</span></span>
<span class="line"><span style="color:#393A34;">git commit </span></span>
<span class="line"><span style="color:#A0ADA0;"># 提交暂存的更改，并记录下备注</span></span>
<span class="line"><span style="color:#393A34;">git commit -m </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">you message</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 等同于 git add . &amp;&amp; git commit -m</span></span>
<span class="line"><span style="color:#393A34;">git commit -am</span></span>
<span class="line"><span style="color:#A0ADA0;"># 对最近一次的提交的信息进行修改，此操作会修改 commit 的 hash 值</span></span>
<span class="line"><span style="color:#393A34;">git commit --amend</span></span>
<span class="line"></span></code></pre></div><h3 id="pull" tabindex="-1">pull <a class="header-anchor" href="#pull" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 从远程仓库拉取代码并合并到本地，可简写为 git pull 等同于 git fetch &amp;&amp; git merge </span></span>
<span class="line"><span style="color:#758575DD;"># fetch 表示只拉取代码，保留本地修改</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git pull </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">远程主机名</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">远程分支名</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;">:</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">本地分支名</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 使用 rebase 的模式进行合并</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git pull --rebase </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">远程主机名</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">远程分支名</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;">:</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">本地分支名</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 从远程仓库拉取代码并合并到本地，可简写为 git pull 等同于 git fetch &amp;&amp; git merge </span></span>
<span class="line"><span style="color:#A0ADA0;"># fetch 表示只拉取代码，保留本地修改</span></span>
<span class="line"><span style="color:#393A34;">git pull </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">远程主机名</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">远程分支名</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">本地分支名</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 使用 rebase 的模式进行合并</span></span>
<span class="line"><span style="color:#393A34;">git pull --rebase </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">远程主机名</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">远程分支名</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">本地分支名</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="fetch" tabindex="-1">fetch <a class="header-anchor" href="#fetch" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># git fetch 操作仅仅只会拉取远程的更改，不会自动进行 merge 操作。对你当前的代码没有影响</span></span>
<span class="line"><span style="color:#758575DD;"># 获取远程仓库特定分支的更新</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git fetch </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">远程主机名</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">分支名</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 获取远程仓库所有分支的更新</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git fetch --all</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># git fetch 操作仅仅只会拉取远程的更改，不会自动进行 merge 操作。对你当前的代码没有影响</span></span>
<span class="line"><span style="color:#A0ADA0;"># 获取远程仓库特定分支的更新</span></span>
<span class="line"><span style="color:#393A34;">git fetch </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">远程主机名</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">分支名</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 获取远程仓库所有分支的更新</span></span>
<span class="line"><span style="color:#393A34;">git fetch --all</span></span>
<span class="line"></span></code></pre></div><h3 id="branch" tabindex="-1">branch <a class="header-anchor" href="#branch" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 新建本地分支，但不切换</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">branch-name</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span></span>
<span class="line"><span style="color:#758575DD;"># 查看本地分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch</span></span>
<span class="line"><span style="color:#758575DD;"># 查看远程分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch -r</span></span>
<span class="line"><span style="color:#758575DD;"># 查看本地和远程分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch -a</span></span>
<span class="line"><span style="color:#758575DD;"># 删除本地分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch -D </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">branch-nane</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 删除远程分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git push origin --delete </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">branch-name</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 重新命名分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch -m </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">old-branch-name</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">new-branch-name</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 新建本地分支，但不切换</span></span>
<span class="line"><span style="color:#393A34;">git branch </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">branch-name</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看本地分支</span></span>
<span class="line"><span style="color:#393A34;">git branch</span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看远程分支</span></span>
<span class="line"><span style="color:#393A34;">git branch -r</span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看本地和远程分支</span></span>
<span class="line"><span style="color:#393A34;">git branch -a</span></span>
<span class="line"><span style="color:#A0ADA0;"># 删除本地分支</span></span>
<span class="line"><span style="color:#393A34;">git branch -D </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">branch-nane</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 删除远程分支</span></span>
<span class="line"><span style="color:#393A34;">git push origin --delete </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">branch-name</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 重新命名分支</span></span>
<span class="line"><span style="color:#393A34;">git branch -m </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">old-branch-name</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">new-branch-name</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="tag" tabindex="-1">tag <a class="header-anchor" href="#tag" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 查看标签</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git tag</span></span>
<span class="line"><span style="color:#758575DD;"># 查看特定标签信息</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git show v0.1</span></span>
<span class="line"><span style="color:#758575DD;"># 创建标签</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git tag -a v0.1 -m </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">提交信息</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#758575DD;"># 删除标签</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git tag -d v0.1</span></span>
<span class="line"><span style="color:#758575DD;"># 标签推送到远程(默认的push不会提交标签)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git push origin v0.1</span></span>
<span class="line"><span style="color:#758575DD;"># 所有标签都推送到远程</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git push origin --tags</span></span>
<span class="line"><span style="color:#758575DD;"># 删除远程分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git push origin :refs/tags/</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">tagname</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 根据tag创建分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git branch </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">branch-name</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">tag-name</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 查看标签</span></span>
<span class="line"><span style="color:#393A34;">git tag</span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看特定标签信息</span></span>
<span class="line"><span style="color:#393A34;">git show v0.1</span></span>
<span class="line"><span style="color:#A0ADA0;"># 创建标签</span></span>
<span class="line"><span style="color:#393A34;">git tag -a v0.1 -m </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">提交信息</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 删除标签</span></span>
<span class="line"><span style="color:#393A34;">git tag -d v0.1</span></span>
<span class="line"><span style="color:#A0ADA0;"># 标签推送到远程(默认的push不会提交标签)</span></span>
<span class="line"><span style="color:#393A34;">git push origin v0.1</span></span>
<span class="line"><span style="color:#A0ADA0;"># 所有标签都推送到远程</span></span>
<span class="line"><span style="color:#393A34;">git push origin --tags</span></span>
<span class="line"><span style="color:#A0ADA0;"># 删除远程分支</span></span>
<span class="line"><span style="color:#393A34;">git push origin :refs/tags/</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">tagname</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 根据tag创建分支</span></span>
<span class="line"><span style="color:#393A34;">git branch </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">branch-name</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">tag-name</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="git常见命令" tabindex="-1">Git常见命令 <a class="header-anchor" href="#git常见命令" aria-hidden="true">#</a></h2><h3 id="git-rebase" tabindex="-1">git rebase <a class="header-anchor" href="#git-rebase" aria-hidden="true">#</a></h3><p><code>rebase</code> 被叫做变基，可以理解为把修改的分支(基) 变化到主分支上。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5183c695f03145fea4dedbc283a430d9~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>从上图来看，就是把分支拿过来拼接到了主分支的后面。</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4b12b00257b479099dab166f5d5afda~tplv-k3u1fbpfcp-zoom-1.image"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18b793e7c8fb48d6a1e6bb60c0ab8ecf~tplv-k3u1fbpfcp-zoom-1.image" alt="iShot2021-08-05 14.46.02"><h3 id="git-merge" tabindex="-1">git merge <a class="header-anchor" href="#git-merge" aria-hidden="true">#</a></h3><p>merge 就是合并，把修改的分支和主分支合并，然后生成一条新的 commit。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6185b9a0ac2b4bfa8c0b0e3022ce438b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>从上图来看，就是把分支和主分支同时修改了 head，并生成一个新的 commit 放到分支上。</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a562b49a4b46432db0f8236b237c6a4d~tplv-k3u1fbpfcp-zoom-1.image"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e59e6c3a3ba64302b8add9b7df6e8d4a~tplv-k3u1fbpfcp-zoom-1.image" alt="iShot2021-08-05 14.50.03"><h4 id="no-fastforward" tabindex="-1">--no-fastforward <a class="header-anchor" href="#no-fastforward" aria-hidden="true">#</a></h4><p><code>--no-ff</code> 表示强行关闭 fast-forward 方式。</p><p>fast-forward 方式就是当条件允许的时候，git直接把HEAD指针指向合并分支的头，完成合并。属于“快进方式”，不过这种情况如果删除分支，则会丢失分支信息。因为在这个过程中没有创建commit，以下分别为 <code>ff</code> 和 <code>no-ff</code> 模式的效果图</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/852e5e8b4f8f4a0e87edeaca9cf438de~tplv-k3u1fbpfcp-zoom-1.image" alt="iShot2021-08-12 14.54.30"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/938ab6f8c84041d1b1566d519443fa8b~tplv-k3u1fbpfcp-zoom-1.image" alt="iShot2021-08-12 14.51.30"><h4 id="squash" tabindex="-1">--squash <a class="header-anchor" href="#squash" aria-hidden="true">#</a></h4><p><code>--squash</code> 用来合并一些不必要的 commit 进行压缩，合并之后的状态需要再次 commit 补充提交信息，同时不会拉过来其他分支的 commit 信息。</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f751a4287a484afb9b09ab3a3551109c~tplv-k3u1fbpfcp-zoom-1.image" alt="iShot2021-08-12 14.58.54"><h4 id="rebase-和-merge-的区别" tabindex="-1">rebase 和 merge 的区别 <a class="header-anchor" href="#rebase-和-merge-的区别" aria-hidden="true">#</a></h4><p><code>rebase </code>和 <code>merge</code> 解决的问题一样：分支代码的归并(合并)，只是方式不同而已：</p><ul><li><p>rebase 不会修改master的head，merge会</p></li><li><p>rebase 解决冲突是一个一个解决，merge最多只会有一个冲突</p><blockquote><p>git add . git rebase --continue git rebase -edit-todo</p></blockquote></li><li><p>merge 只有在冲突的时候，解决完冲突才会自动产生一个commit。</p></li><li><p>rebase可以合并commit，也就是篡改历史，merge不会</p><blockquote><p>git rebase -i <code>&lt;commit-id&gt;</code></p></blockquote></li><li><p>rebase——注意细节，merge——大力出奇迹</p></li><li><p>个人本地rebase，线上merge</p></li></ul><p>再来看一个例子：</p><ol><li>初始化</li></ol><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b9aa25a08b241f1a3f3ece14df7982d~tplv-k3u1fbpfcp-zoom-1.image" alt="820480-20151210160805574-772504074"><ol start="2"><li><p>merge</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d07f84cd2a54af3b9c17e585c64fa32~tplv-k3u1fbpfcp-zoom-1.image" alt="820480-20151210161019933-162065399"></li><li><p>rebase</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/457ec78d30ad47519d96d1b66851d990~tplv-k3u1fbpfcp-zoom-1.image" alt="820480-20151210161429652-541776089"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78e1b637cbe246f987f86c5d1a22741e~tplv-k3u1fbpfcp-zoom-1.image" alt="820480-20151210161609636-1636192051"></p></li></ol><h3 id="git-cherry-pick" tabindex="-1">git cherry-pick <a class="header-anchor" href="#git-cherry-pick" aria-hidden="true">#</a></h3><p><code>cherry-pick</code> 主要作用于：截取一段代码提交合并到当前分支上</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">git cherry-pick </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">commit-id</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git cherry-pick </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">start-id</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;">..</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">end-id</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git cherry-pick </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">start-id</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;">^..</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">end-id</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">git cherry-pick </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">commit-id</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">git cherry-pick </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">start-id</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">..</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">end-id</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">git cherry-pick </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">start-id</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">^..</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">end-id</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="git-stash" tabindex="-1">git stash <a class="header-anchor" href="#git-stash" aria-hidden="true">#</a></h3><p><code>stash</code> 主要作用于：暂存当前分支，修改其他的分支结束后，执行 pop 可以还原之前的修改</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 保存当前修改</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git stash save </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">message</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;"># 查看当前分支上次的修改</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git stash pop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;"># 查看分支所有的更改</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git stash list</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 保存当前修改</span></span>
<span class="line"><span style="color:#393A34;">git stash save </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">message</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># 查看当前分支上次的修改</span></span>
<span class="line"><span style="color:#393A34;">git stash pop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># 查看分支所有的更改</span></span>
<span class="line"><span style="color:#393A34;">git stash list</span></span>
<span class="line"></span></code></pre></div><h3 id="git-reset" tabindex="-1">git reset <a class="header-anchor" href="#git-reset" aria-hidden="true">#</a></h3><p><code>reset</code> 指的是版本的撤回，即彻底撤回(回退)到某个版本，此次之后的修改会被退回到暂存区，同时commit信息会被消除</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 回退到某个版本</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git reset --hard </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">commit-id</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 回退到所有内容上个版本</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git reset HEAD^</span></span>
<span class="line"><span style="color:#758575DD;"># 回退某个文件到上个版本</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git reset HEAD^ </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 回退到某个版本</span></span>
<span class="line"><span style="color:#393A34;">git reset --hard </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">commit-id</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 回退到所有内容上个版本</span></span>
<span class="line"><span style="color:#393A34;">git reset HEAD^</span></span>
<span class="line"><span style="color:#A0ADA0;"># 回退某个文件到上个版本</span></span>
<span class="line"><span style="color:#393A34;">git reset HEAD^ </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="git-revert" tabindex="-1">git revert <a class="header-anchor" href="#git-revert" aria-hidden="true">#</a></h3><p><code>revert</code> 指的是撤销某次操作，此次操作前的commit都会被保留，会创建一个新的commit</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 丢弃最近的三个commit，把状态恢复到最近的第四个commit，并提交一个新的commit来记录这次改变</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git revert HEAD~3</span></span>
<span class="line"><span style="color:#758575DD;"># 丢弃从最近的第五个commit（包含）到第二个（不包含），但是不自动生成commit</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git revert -n master~5..master~2</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 丢弃最近的三个commit，把状态恢复到最近的第四个commit，并提交一个新的commit来记录这次改变</span></span>
<span class="line"><span style="color:#393A34;">git revert HEAD~3</span></span>
<span class="line"><span style="color:#A0ADA0;"># 丢弃从最近的第五个commit（包含）到第二个（不包含），但是不自动生成commit</span></span>
<span class="line"><span style="color:#393A34;">git revert -n master~5..master~2</span></span>
<span class="line"></span></code></pre></div><p><code>reset</code> 和 <code>revert</code> 的区别：</p><ul><li><p>revert 是用一个新的commit来回滚之前的commit，reset是直接删除指定的commit</p></li><li><p>revert 合并老分支不会出现删除的代码，而 reset 会</p><blockquote><p>假设场景为merge以前的老版本：因为git revert是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，但是git reset是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入。</p></blockquote></li><li><p>revert是HEAD继续前进，reset 是HEAD向后移动，revert 新的commit内容和要revert的内容正好相反，才能够抵消要被revert的内容。</p></li></ul><h3 id="git-alias" tabindex="-1">git alias <a class="header-anchor" href="#git-alias" aria-hidden="true">#</a></h3><p>重命名git命令，更方便，配置会生效到 <code>~/.gitconfig</code> 里。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 配置</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git config --global alias.ci commit</span></span>
<span class="line"><span style="color:#758575DD;"># 使用</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git ci -m </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">提交信息</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 配置</span></span>
<span class="line"><span style="color:#393A34;">git config --global alias.ci commit</span></span>
<span class="line"><span style="color:#A0ADA0;"># 使用</span></span>
<span class="line"><span style="color:#393A34;">git ci -m </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">提交信息</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="git-深入" tabindex="-1">Git 深入 <a class="header-anchor" href="#git-深入" aria-hidden="true">#</a></h2><h3 id="版本控制分类" tabindex="-1">版本控制分类 <a class="header-anchor" href="#版本控制分类" aria-hidden="true">#</a></h3><h4 id="本地版本控制" tabindex="-1">本地版本控制 <a class="header-anchor" href="#本地版本控制" aria-hidden="true">#</a></h4><p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b7252fd431641cf8defef6fccd89d68~tplv-k3u1fbpfcp-zoom-1.image" alt="05163110-c8a48b29015245b78dc0127429ef5213"><h4 id="集中式版本控制" tabindex="-1">集中式版本控制 <a class="header-anchor" href="#集中式版本控制" aria-hidden="true">#</a></h4><p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e26bd1b81e84c578305f4b4697fe0e3~tplv-k3u1fbpfcp-zoom-1.image" alt="63651-20170904213634085-673206677"></p><ol><li>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，在不同分支工作。</li><li>所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。</li><li>代表产品：SVN、CVS、VSS</li></ol><h4 id="分布式版本控制" tabindex="-1">分布式版本控制 <a class="header-anchor" href="#分布式版本控制" aria-hidden="true">#</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd2695bc55d544e48831215a7f484832~tplv-k3u1fbpfcp-zoom-1.image" alt="63651-20170904214244944-1222535795"></p><ol><li>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。</li><li>每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</li></ol><h3 id="文件操作" tabindex="-1">文件操作 <a class="header-anchor" href="#文件操作" aria-hidden="true">#</a></h3><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态。</p><p>GIT不关心文件两个版本之间的具体差别，而是关心文件的整体是否有改变，<strong>若文件被改变，在添加提交时就生成文件新版本的快照，而判断文件整体是否改变的方法就是用 <code>SHA-1</code> 算法计算文件的校验和。</strong></p><h4 id="文件的4种状态" tabindex="-1">文件的4种状态 <a class="header-anchor" href="#文件的4种状态" aria-hidden="true">#</a></h4><ul><li><strong>Untracked</strong>：未跟踪，此文件在文件夹中，但并没有加入到git库，不参与版本控制。通过 <code>git add</code> 状态变为 <code>Staged</code>。</li><li><strong>Unmodify</strong>：文件已经入库，未修改，即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处，如果它被修改，而变为 <code>Modified</code>. 如果使用 <code>git rm</code> 移出版本库，则成为 <code>Untracked</code> 文件。</li><li><strong>Modified</strong>：文件已修改，仅仅是修改，并没有进行其他的操作。这个文件也有两个去处，通过 <code>git add</code> 可进入暂存 <code>staged</code> 状态，使用 <code>git checkout</code> 则丢弃修改过，返回到 <code>unmodify</code> 状态，这个 <code>git checkout</code> 即从库中取出文， 覆盖当前修改。</li><li><strong>Staged</strong>：暂存状态，执行 <code>git commit</code> 则将修改同步到库中，这时库中的文件和本地文件又变为一致，文件为 <code>Unmodify</code> 状态. 执行 <code>git reset HEAD filename</code> 取消暂存，文件状态为 <code>Modified</code>。</li></ul><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/610b2af02de3437a8425cfae47f8b259~tplv-k3u1fbpfcp-zoom-1.image" alt="63651-20170909091456335-1787774607"><h4 id="rm" tabindex="-1">rm <a class="header-anchor" href="#rm" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 直接从暂存区删除文件，工作区不变</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git rm --cached </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 版本库拉代码到暂存区，暂存区被覆盖，但是工作区不受影响</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git reset HEAD </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 直接从暂存区删除文件，工作区不变</span></span>
<span class="line"><span style="color:#393A34;">git rm --cached </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 版本库拉代码到暂存区，暂存区被覆盖，但是工作区不受影响</span></span>
<span class="line"><span style="color:#393A34;">git reset HEAD </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h4 id="checkout" tabindex="-1">checkout <a class="header-anchor" href="#checkout" aria-hidden="true">#</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2820af3a3b2446779eef8dea9598216e~tplv-k3u1fbpfcp-zoom-1.image" alt="63651-20170906224842804-513302659"></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 检出branch分支。要完成图中的三个步骤，更新HEAD以指向branch分支，以及用branch  指向的树更新暂存区和工作区。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout branch</span></span>
<span class="line"><span style="color:#758575DD;"># 汇总显示工作区、暂存区与HEAD的差异。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout</span></span>
<span class="line"><span style="color:#758575DD;"># 用暂存区中filename文件来覆盖工作区中的filename文件。相当于取消自上次执行git add filename以来（如果执行过）的本地修改。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout -- filename</span></span>
<span class="line"><span style="color:#758575DD;"># 维持HEAD的指向不变。用branch所指向的提交中filename替换暂存区和工作区中相应的文件。注意会将暂存区和工作区中的filename文件直接覆盖。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout branch -- filename</span></span>
<span class="line"><span style="color:#758575DD;"># 这条命令最危险！会取消所有本地的修改（相对于暂存区）。相当于用暂存区的所有文件直接覆盖本地文件，不给用户任何确认的机会！</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout </span><span style="color:#B8A965;">.</span></span>
<span class="line"><span style="color:#758575DD;"># 如果不加commit_id，那么git checkout -- file_name 表示恢复文件到本地版本库中最新的状态。</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout commit_id -- file_name</span></span>
<span class="line"><span style="color:#758575DD;"># 从当前分支的HEAD签出一个新分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git checkout -b </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">branch</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 检出branch分支。要完成图中的三个步骤，更新HEAD以指向branch分支，以及用branch  指向的树更新暂存区和工作区。</span></span>
<span class="line"><span style="color:#393A34;">git checkout branch</span></span>
<span class="line"><span style="color:#A0ADA0;"># 汇总显示工作区、暂存区与HEAD的差异。</span></span>
<span class="line"><span style="color:#393A34;">git checkout</span></span>
<span class="line"><span style="color:#A0ADA0;"># 用暂存区中filename文件来覆盖工作区中的filename文件。相当于取消自上次执行git add filename以来（如果执行过）的本地修改。</span></span>
<span class="line"><span style="color:#393A34;">git checkout -- filename</span></span>
<span class="line"><span style="color:#A0ADA0;"># 维持HEAD的指向不变。用branch所指向的提交中filename替换暂存区和工作区中相应的文件。注意会将暂存区和工作区中的filename文件直接覆盖。</span></span>
<span class="line"><span style="color:#393A34;">git checkout branch -- filename</span></span>
<span class="line"><span style="color:#A0ADA0;"># 这条命令最危险！会取消所有本地的修改（相对于暂存区）。相当于用暂存区的所有文件直接覆盖本地文件，不给用户任何确认的机会！</span></span>
<span class="line"><span style="color:#393A34;">git checkout </span><span style="color:#998418;">.</span></span>
<span class="line"><span style="color:#A0ADA0;"># 如果不加commit_id，那么git checkout -- file_name 表示恢复文件到本地版本库中最新的状态。</span></span>
<span class="line"><span style="color:#393A34;">git checkout commit_id -- file_name</span></span>
<span class="line"><span style="color:#A0ADA0;"># 从当前分支的HEAD签出一个新分支</span></span>
<span class="line"><span style="color:#393A34;">git checkout -b </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">branch</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h4 id="diff" tabindex="-1">diff <a class="header-anchor" href="#diff" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki has-diff vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 比对文件差异</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git diff </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 比较暂存区的文件与之前已经提交过的文件</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git diff --cached</span></span>
<span class="line"><span style="color:#758575DD;"># 比较repo与工作空间中的文件差异</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git diff HEAD~n</span></span>
<span class="line"></span></code></pre><pre class="shiki has-diff vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 比对文件差异</span></span>
<span class="line"><span style="color:#393A34;">git diff </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 比较暂存区的文件与之前已经提交过的文件</span></span>
<span class="line"><span style="color:#393A34;">git diff --cached</span></span>
<span class="line"><span style="color:#A0ADA0;"># 比较repo与工作空间中的文件差异</span></span>
<span class="line"><span style="color:#393A34;">git diff HEAD~n</span></span>
<span class="line"></span></code></pre></div><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c5089fef53f49d189d9cd4d2593ead1~tplv-k3u1fbpfcp-zoom-1.image" alt="63651-20170914095506203-2063795525"><h4 id="gitignore" tabindex="-1">.gitIgnore <a class="header-anchor" href="#gitignore" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 忽略所有 .txt结尾的文件</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;">.txt </span></span>
<span class="line"><span style="color:#758575DD;"># 但lib.txt除外</span></span>
<span class="line"><span style="color:#CB7676;">!</span><span style="color:#DBD7CAEE;">lib.txt</span></span>
<span class="line"><span style="color:#758575DD;"># 仅忽略项目根目录下的TODO文件，不包括其它目录temp</span></span>
<span class="line"><span style="color:#DBD7CAEE;">/temp</span></span>
<span class="line"><span style="color:#758575DD;"># 忽略build/目录下的所有文件</span></span>
<span class="line"><span style="color:#DBD7CAEE;">build/</span></span>
<span class="line"><span style="color:#758575DD;"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></span>
<span class="line"><span style="color:#DBD7CAEE;">doc/</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;">.txt </span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 忽略所有 .txt结尾的文件</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;">.txt </span></span>
<span class="line"><span style="color:#A0ADA0;"># 但lib.txt除外</span></span>
<span class="line"><span style="color:#AB5959;">!</span><span style="color:#393A34;">lib.txt</span></span>
<span class="line"><span style="color:#A0ADA0;"># 仅忽略项目根目录下的TODO文件，不包括其它目录temp</span></span>
<span class="line"><span style="color:#393A34;">/temp</span></span>
<span class="line"><span style="color:#A0ADA0;"># 忽略build/目录下的所有文件</span></span>
<span class="line"><span style="color:#393A34;">build/</span></span>
<span class="line"><span style="color:#A0ADA0;"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></span>
<span class="line"><span style="color:#393A34;">doc/</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">.txt </span></span>
<span class="line"></span></code></pre></div><h4 id="log" tabindex="-1">log <a class="header-anchor" href="#log" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 显示某个文件提交日志</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">file</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575DD;"># 显示当前分支所有提交日志</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log</span></span>
<span class="line"><span style="color:#758575DD;"># 图形化显示提交历史</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log --graph</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 显示某个文件提交日志</span></span>
<span class="line"><span style="color:#393A34;">git log </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">file</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># 显示当前分支所有提交日志</span></span>
<span class="line"><span style="color:#393A34;">git log</span></span>
<span class="line"><span style="color:#A0ADA0;"># 图形化显示提交历史</span></span>
<span class="line"><span style="color:#393A34;">git log --graph</span></span>
<span class="line"></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e88a1da185c4edfb5b87bdb2021a07b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;">#  得到 git仓库中的代码行数</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git ls-files </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> xargs wc -l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">#仓库提交者排名前 5（如果看全部，去掉 head 管道即可）：</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log --pretty=</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">%aN</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> sort </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> uniq -c </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> sort -k1 -n -r </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> head -n 5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">#仓库提交者（邮箱）排名前 5：这个统计可能不会太准，因为很多人有不同的邮箱，但会使用相同的名字</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log --pretty=format:%ae </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> gawk -- </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">{ ++c[$0]; } END { for(cc in c) printf &quot;%5d %s\n&quot;,c[cc],cc; }</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> sort -u -n -r </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> head -n 5 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">#贡献者统计：</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log --pretty=</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">%aN</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> sort -u </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> wc -l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">#提交数统计：</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git log --oneline </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CAEE;"> wc -l </span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">#  得到 git仓库中的代码行数</span></span>
<span class="line"><span style="color:#393A34;">git ls-files </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> xargs wc -l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#仓库提交者排名前 5（如果看全部，去掉 head 管道即可）：</span></span>
<span class="line"><span style="color:#393A34;">git log --pretty=</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">%aN</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> sort </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> uniq -c </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> sort -k1 -n -r </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> head -n 5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#仓库提交者（邮箱）排名前 5：这个统计可能不会太准，因为很多人有不同的邮箱，但会使用相同的名字</span></span>
<span class="line"><span style="color:#393A34;">git log --pretty=format:%ae </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> gawk -- </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">{ ++c[$0]; } END { for(cc in c) printf &quot;%5d %s\n&quot;,c[cc],cc; }</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> sort -u -n -r </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> head -n 5 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#贡献者统计：</span></span>
<span class="line"><span style="color:#393A34;">git log --pretty=</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">%aN</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> sort -u </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> wc -l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#提交数统计：</span></span>
<span class="line"><span style="color:#393A34;">git log --oneline </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> wc -l </span></span>
<span class="line"></span></code></pre></div><h3 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-hidden="true">#</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#BD976A;">COMMIT_EDITMSG</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 本地最后一个提交的信息</span></span>
<span class="line"><span style="color:#BD976A;">config</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// -local的配置</span></span>
<span class="line"><span style="color:#BD976A;">description</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 描述</span></span>
<span class="line"><span style="color:#BD976A;">FETCH_HEAD</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 分支在远程的最新状态</span></span>
<span class="line"><span style="color:#BD976A;">HEAD</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 当前的HEAD，映射到ref引用，能够找到下一次commit的前一次哈希值</span></span>
<span class="line"><span style="color:#BD976A;">hook</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 钩子</span></span>
<span class="line"><span style="color:#BD976A;">index</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 暂存区</span></span>
<span class="line"><span style="color:#BD976A;">info</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">//仓库的一些信息</span></span>
<span class="line"><span style="color:#BD976A;">logs</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 提交信息，引用记录</span></span>
<span class="line"><span style="color:#BD976A;">objects</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// git对象</span></span>
<span class="line"><span style="color:#BD976A;">ORIGIN_HEAD</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 远程仓库的当前引用</span></span>
<span class="line"><span style="color:#BD976A;">refs</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 引用的映射关系</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#B07D48;">COMMIT_EDITMSG</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 本地最后一个提交的信息</span></span>
<span class="line"><span style="color:#B07D48;">config</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// -local的配置</span></span>
<span class="line"><span style="color:#B07D48;">description</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 描述</span></span>
<span class="line"><span style="color:#B07D48;">FETCH_HEAD</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 分支在远程的最新状态</span></span>
<span class="line"><span style="color:#B07D48;">HEAD</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 当前的HEAD，映射到ref引用，能够找到下一次commit的前一次哈希值</span></span>
<span class="line"><span style="color:#B07D48;">hook</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 钩子</span></span>
<span class="line"><span style="color:#B07D48;">index</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 暂存区</span></span>
<span class="line"><span style="color:#B07D48;">info</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">//仓库的一些信息</span></span>
<span class="line"><span style="color:#B07D48;">logs</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 提交信息，引用记录</span></span>
<span class="line"><span style="color:#B07D48;">objects</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// git对象</span></span>
<span class="line"><span style="color:#B07D48;">ORIGIN_HEAD</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 远程仓库的当前引用</span></span>
<span class="line"><span style="color:#B07D48;">refs</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 引用的映射关系</span></span>
<span class="line"></span></code></pre></div><h3 id="项目规范" tabindex="-1">项目规范 <a class="header-anchor" href="#项目规范" aria-hidden="true">#</a></h3><p>使用 <code>husky</code> ， <code>lint-staged</code> 和 <code>commitlint</code> 来规范提交的代码。</p><h4 id="husky" tabindex="-1">husky <a class="header-anchor" href="#husky" aria-hidden="true">#</a></h4><p>可以将 <code>git</code> 内置的钩子暴露出来，很方便地进行钩子的命令注入，而不需要在 <code>.git</code> 目录下自己写 <code>shell</code> 脚本了；不仅可以执行 <code>js</code> 文件作为脚本，还可以将脚本暴露出来，方便在<code>git</code>项目中进行管理。</p><p>常用的钩子：</p><ul><li><code>pre-commit</code>：由 <code>git commit</code> 命令触发，在 <code>commit-msg</code> 之前</li><li><code>commit-msg</code>：<code>git commit</code> 和 <code>git merge</code> 都会触发，会传递一个参数，该参数为存放当前 <code>commit</code> 消息的<strong>临时文件路径</strong>；可以通过 <code>--no-verify</code> 参数来跳过<code>commit-msg</code>钩子</li><li><code>post-merge</code>：触发于 <code>merge</code> 完成后</li></ul><h4 id="lint-staged" tabindex="-1">lint-staged <a class="header-anchor" href="#lint-staged" aria-hidden="true">#</a></h4><p>验证被 <code>git add</code> 的文件，相当于提交到暂存区前的一个验证。</p><h4 id="commitlint" tabindex="-1">commitlint <a class="header-anchor" href="#commitlint" aria-hidden="true">#</a></h4><p>验证commit提交的信息，格式为：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">git commit -m </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">type</span><span style="color:#CB7676;">&gt;</span><span style="color:#666666;">[</span><span style="color:#DBD7CAEE;">optional scope</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;">: </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;">description</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">git commit -m </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">type</span><span style="color:#AB5959;">&gt;</span><span style="color:#999999;">[</span><span style="color:#393A34;">optional scope</span><span style="color:#999999;">]</span><span style="color:#393A34;">: </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">description</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><h5 id="type" tabindex="-1">type <a class="header-anchor" href="#type" aria-hidden="true">#</a></h5><p>用于表明我们这次提交的改动类型，是新增了功能？还是修改了测试代码？又或者是更新了文档？</p><table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>build</td><td>编译相关的修改，例如发布版本、对项目构建或者依赖的改动</td></tr><tr><td>chore</td><td>其他修改 ，如改变构建流程、或者增加依赖库、工具等</td></tr><tr><td>ci</td><td>持续集成修改</td></tr><tr><td>docs</td><td>文档修改</td></tr><tr><td>feat</td><td>新特性、新功能</td></tr><tr><td>fix</td><td>修改bug</td></tr><tr><td>perf</td><td>优化相关，比如提升性能、体验</td></tr><tr><td>refactor</td><td>代码重构</td></tr><tr><td>revert</td><td>回滚到上一个版本</td></tr><tr><td>style</td><td>代码格式修改，注意不是 css 修改</td></tr><tr><td>test</td><td>测试用例修改</td></tr></tbody></table><h5 id="optional-scope" tabindex="-1">optional scope <a class="header-anchor" href="#optional-scope" aria-hidden="true">#</a></h5><p>一个可选的修改范围。用于标识此次提交主要涉及到代码中哪个模块。</p><h5 id="description" tabindex="-1">description <a class="header-anchor" href="#description" aria-hidden="true">#</a></h5><p>一句话描述此次提交的主要内容，做到言简意赅。</p><h5 id="例子" tabindex="-1">例子 <a class="header-anchor" href="#例子" aria-hidden="true">#</a></h5><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">git commit -m </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">fix(account): 修复xxx的bug</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">git commit -m </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">refactor: 重构整个项目</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">git commit -m </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">fix(account): 修复xxx的bug</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">git commit -m </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">refactor: 重构整个项目</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span></code></pre></div><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-hidden="true">#</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#BD976A;">npm</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">husky</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lint</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">staged</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">@</span><span style="color:#BD976A;">commitlint</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">cli</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">@</span><span style="color:#BD976A;">commitlint</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">config</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">conventional</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">@</span><span style="color:#BD976A;">commitlint</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">format</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">D</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#B07D48;">npm</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">husky</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lint</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">staged</span><span style="color:#393A34;"> </span><span style="color:#999999;">@</span><span style="color:#B07D48;">commitlint</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">cli</span><span style="color:#393A34;"> </span><span style="color:#999999;">@</span><span style="color:#B07D48;">commitlint</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">config</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">conventional</span><span style="color:#393A34;"> </span><span style="color:#999999;">@</span><span style="color:#B07D48;">commitlint</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">format</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">D</span></span>
<span class="line"></span></code></pre></div><h4 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-hidden="true">#</a></h4><p>在 <code>package.json</code> 中加入：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">husky</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965AA;">&quot;</span><span style="color:#B8A965;">hooks</span><span style="color:#B8A965AA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965AA;">&quot;</span><span style="color:#B8A965;">pre-commit</span><span style="color:#B8A965AA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">lint-staged</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965AA;">&quot;</span><span style="color:#B8A965;">commit-msg</span><span style="color:#B8A965AA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">commitlint -E HUSKY_GIT_PARAMS</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">,</span></span>
<span class="line"><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">lint-staged</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965AA;">&quot;</span><span style="color:#B8A965;">src/*.{js,vue}</span><span style="color:#B8A965AA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">npm run didlint</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">git add .</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">husky</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418AA;">&quot;</span><span style="color:#998418;">hooks</span><span style="color:#998418AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418AA;">&quot;</span><span style="color:#998418;">pre-commit</span><span style="color:#998418AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">lint-staged</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418AA;">&quot;</span><span style="color:#998418;">commit-msg</span><span style="color:#998418AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">commitlint -E HUSKY_GIT_PARAMS</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;">,</span></span>
<span class="line"><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">lint-staged</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418AA;">&quot;</span><span style="color:#998418;">src/*.{js,vue}</span><span style="color:#998418AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">npm run didlint</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">git add .</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><p>新增文件 <code>.commitlintrc.js</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">extends</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@commitlint/config-conventional</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">formatter</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@commitlint/format</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">rules</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">type-enum</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">always</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">fix</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">feat</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">test</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">chore</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">docs</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">refactor</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">style</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">type-case</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">always</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">lower-case</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">//允许type小写校验</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">type-empty</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">never</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;">//不允许type为空</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">scope-empty</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;">         </span><span style="color:#758575DD;">// 允许scope为空</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">subject-full-stop</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">never</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">subject-case</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">always</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">lower-case</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">header-max-length</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">always</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">72</span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">extends</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@commitlint/config-conventional</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">formatter</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@commitlint/format</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">rules</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">type-enum</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">always</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">fix</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">feat</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">test</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">chore</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">docs</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">refactor</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">style</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">type-case</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">always</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">lower-case</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">//允许type小写校验</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">type-empty</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">never</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;">//不允许type为空</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">scope-empty</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">],</span><span style="color:#393A34;">         </span><span style="color:#A0ADA0;">// 允许scope为空</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">subject-full-stop</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">never</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">subject-case</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">always</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">lower-case</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">header-max-length</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">always</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">72</span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span>
<span class="line"></span></code></pre></div><h1 id="相关资料" tabindex="-1">相关资料 <a class="header-anchor" href="#相关资料" aria-hidden="true">#</a></h1><ul><li><p><a href="http://www.path8.net/tn/archives/6039" target="_blank" rel="noreferrer">BitKeeper与Linux，git史前琐事</a></p></li><li><p><a href="https://www.cnblogs.com/yaozhongxiao/p/3811130.html" target="_blank" rel="noreferrer">Git图解剖析</a></p></li><li><p><a href="https://www.cnblogs.com/kevingrace/p/5690241.html" target="_blank" rel="noreferrer">gitIgnore规则</a></p></li><li><p><a href="https://segmentfault.com/a/1190000007996197" target="_blank" rel="noreferrer">Git系列之Refs与Reflog</a></p></li><li><p><a href="https://typicode.github.io/husky/#/" target="_blank" rel="noreferrer">husky文档</a></p></li><li><p><a href="https://github.com/okonet/lint-staged#readme" target="_blank" rel="noreferrer">lint-staged文档</a></p></li><li><p><a href="https://commitlint.js.org/#/" target="_blank" rel="noreferrer">commitlint文档</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/100427908" target="_blank" rel="noreferrer">前端codeLint-- 为项目集成ESLint、StyleLint、commitLint实战和原理</a></p></li></ul></div></div></div></main></div></div><div class="text-center text-[14px] pt-10 pb-2 scale-80 color-[black]" style="letter-spacing:0.2rem;"><a href="https://beian.miit.gov.cn/">浙ICP备2022027583号</a></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"78f3a6e0\",\"movies_index.md\":\"6d564773\",\"posts_async.md\":\"c7940291\",\"posts_chrome_workflow.md\":\"dfdcf7cb\",\"posts_csp.md\":\"8b1e0799\",\"posts_eventloop.md\":\"c6caf8e8\",\"posts_form.md\":\"3add2ce3\",\"posts_friends_of_time_2023.md\":\"71b69490\",\"posts_git.md\":\"c90465ed\",\"posts_http_option.md\":\"9997527c\",\"posts_index.md\":\"279f248e\",\"posts_promise_next.md\":\"58ff639f\",\"posts_promise_prev.md\":\"4ddfbc45\",\"posts_rebuild_mac.md\":\"1be3b152\",\"posts_refactor_js.md\":\"76f8eb20\",\"posts_render_on_the_web.md\":\"0b11ff2c\",\"posts_restudy_function.md\":\"34c408f6\",\"posts_restudy_obj.md\":\"2fb56604\",\"posts_restudy_scope.md\":\"de7f7b3d\",\"posts_sourcemap.md\":\"259901c9\",\"posts_summary_2011.md\":\"ac21b29a\",\"posts_svg.md\":\"60324705\",\"posts_translate.md\":\"4dddf28e\",\"posts_vscode_setting.md\":\"26038331\",\"posts_vuepress_plugin_awesome_musicplayer.md\":\"8c0097a3\",\"posts_webpack_core.md\":\"d6397305\"}")</script>
    <script type="module" async src="/assets/app.ec7a89e7.js"></script>
    
  </body>
</html>